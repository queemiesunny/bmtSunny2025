<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>羽球報名</title>
  <style>
    /* Loading 遮罩 */
    #loading {
      display: none;
      position: fixed;
      z-index: 999;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.7);
      justify-content: center;
      align-items: center;
      font-size: 20px;
      color: #333;
    }

    /* 轉圈圈動畫 */
    .spinner {
      border: 6px solid #f3f3f3;
      border-top: 6px solid #3498db;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin-right: 10px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <h2>羽球報名表單</h2>
  <form id="signupForm">
    姓名：<input type="text" id="name" name="name" required><br><br>
    日期：<input type="text" id="date" name="date" required><br><br>
    Line ID：<input type="text" id="lineid" name="lineid"><br><br>
    <button type="submit">送出</button>
  </form>

  <!-- Loading 提示 -->
  <div id="loading">
    <div class="spinner"></div>
    <span>資料送出中，請稍候...</span>
  </div>

  <script>
    const scriptUrl = "【你的 Apps Script 網址貼在這裡】";

    document.getElementById("signupForm").addEventListener("submit", function(e) {
      e.preventDefault();

      // 顯示 loading
      document.getElementById("loading").style.display = "flex";

      const formData = new FormData(this);
      fetch(scriptUrl, { method: "POST", body: formData })
        .then(response => response.text())
        .then(result => {
          // 隱藏 loading
          document.getElementById("loading").style.display = "none";

          if (result === "OK") {
            alert("報名成功！");
            document.getElementById("signupForm").reset();
          } else if (result === "DUPLICATE") {
            alert("已經報名過囉！");
          } else {
            alert("發生錯誤，請再試一次。");
          }
        })
        .catch(error => {
          // 隱藏 loading
          document.getElementById("loading").style.display = "none";
          alert("傳送失敗：" + error);
        });
    });
  </script>
</body>
</html>
